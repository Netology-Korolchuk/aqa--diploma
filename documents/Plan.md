# План автоматизации тестирования приложения "Покупка тура"

## Перечень автоматизируемых сценариев
### Тестирование UI
* **Позитивные**
    * Купить тур по карте (APPROVED карта, валидные значения для формы)
    * Купить тур в кредит (APPROVED карта, валидные значения для формы)
    * Купить тур по карте (DECLINED карта, валидные значения для формы)
    * Купить тур в кредит (DECLINED карта, валидные значения для формы)
    * Повторная оплата с той же карты
* **Негативные. Применяются для обоих вариантов покупки (купить по карта, купить в кредит)**
     * Отправка пустой формы
     * Отправка формы с не валидными значениями (min)
        * номер карты  - 15 цифр
        * поле месяц - 1 цифра
        * поле год - 1 цифра
        * поле владелец - 1 буква
        * поле CVV - 1 цифра
     * Отправка формы с не валидными значениями (max)
        * номер карты - 17 цифр
        * поле месяц - 3 цифры
        * поле год - 3 цифры
        * поле владелец - 257 букв
        * поле CVV - 4 цифры
     * Отправка формы с не валидными значениями (буквы вместо цифр)
        * номер карты - буквы
        * поле месяц - буквы
        * поле год - буквы
        * поле владелец - цифры
        * поле CVV - буквы
     * Отправка формы с не валидными значениями (спецсимволы)
        * номер карты - спецсимволы
        * поле месяц - спецсимволы
        * поле год - спецсимволы
        * поле владелец - спецсимволы
        * поле CVV - спецсимволы  
     * Отправка формы с не валидными значениями:
        * номер карты - APPROVED карта
        * поле месяц - несуществующий номер месяца
        * поле год - 4 цифры
        * поле владелец - кирилица с латиницей
        * поле CVV - 2 цифры 
     * Отправка формы с истекшим годом:
        * номер карты - APPROVED карта
        * поле месяц - валидный месяц
        * поле год - истекший год
        * поле владелец - кирилица
        * поле CVV - валидный
     * Отправка формы с истекшим сроком (месяц+год):
        * номер карты - APPROVED карта
        * поле месяц - прошлый месяц
        * поле год - текущий год
        * поле владелец - кирилица
        * поле CVV - валидный
     * Отправка формы с годом в далеком будущем:
        * номер карты - APPROVED карта
        * поле месяц - валидный месяц
        * поле год - год в далеком будущем
        * поле владелец - латиница
        * поле CVV - валидный
     * Отправка формы с картой не из базы
     * Обновление страницы во время заполнения данных
### Тестирование API
* **Позитивные**
    * Отправка POST запроса с APPROVED картой и валидными значениями в body
    * Отправка POST запроса с DECLINED картой и валидными значениями в body
* **Негативные**
    * Отправка GET запроса
    * Отправка POST запроса с пустым body
    * Отправка POST запроса с APPROVED картой c отсутствующими данными в body
    * Отправка POST запроса с APPROVED картой c невалидными данными в body
    * Отправка POST запроса с DECLINED картой c отсутствующими данными в body
    * Отправка POST запроса с DECLINED картой c невалидными данными в body
    * Отправка POST запроса с картой не из базы
### Тестирование БД (MySQL, PostgreSQL)
Тестирование для каждой БД будет происходит по отдельности. Сначала будет запускаться приложение на одной БД, прогонять все тесты. Потом запускать приложение на другой БД и прогонять все тесты.
* Данные об оплате по карте записываются в соответствующую таблицу
* Данные об оплате в кредит записываются в соответствующую таблицу
* Данные по всем заказам записываются в соответствующую таблицу
* В БД сохраняется статуст платежа
* В БД не хранится номер карты
    
## Перечень используемых инструментов с обоснованием выбора
* Github - для хранения кода проекта. Это крупнейший, один из самых популярных сервисов, к тому же бесплатный. Есть возможность хранить репозитории как в публичном доступе, так и в приватном.
* Gradle - для сборки проекта авто-тестирования. Одина из самым популярных систем автосборки проектов. Достаточно просто подключаются все необходимые плагины и зависимости. Есть отчет о прохождении тестов.
* JUnit - для написания авто-тестов и их запуска. Данный инструмент выбран, т.к. имею более глубокую экспертизу по сравнению с альтернативными.
* Java - для написания кода авто-тестов. Так как приложение написано на Java, то логично и для тестов использовать тот же язык.
* Selenide - для автоматизации работы с GUI. Удобный и простой в использовании инструмент для написания автотестов для UI, имеет достаточно большой набор проверок, "умные ожидания", автоматические скриншоты страниц.
* Faker - для создания тестовых данных. Данный инструмент выбран из многих похожих в ввиду наибольшей практики в использовании.
* Rest Assured - для работы с API проекта. Одина из самых популяных библиотек для тестирования API на базе Java. Имеет подробную документацию, прост в использовании, имеет широкий функционал. А при помощи библиотеки Gson легко можно сериализовать объекты в json и наоборот.
* DbUtils - для работы с БД. Библиотека упрощает работу с БД и и предоставляет дополнительные удобства в работе, в отличии от стандартной бибилиотеки Java.
* Docker - для разворачивания контейнеров с БД, JS и иных необходимых образов. Наиболее распространенная система контейнеризации, имеет хорошую документацию для большого кол-ва образов.
* Allure - для отчетов выполнения тестов. Предоставляет наглядный и понятный отчет прогона автотестов. Легко подключается, имеет множество настроек (разбиение на категории, важность и др).

## Перечень и описание возможных рисков при автоматизации
* Отсутствие документации по заполнению данных - может повлиять на неверную трактовку результатов тестов
* Проблемы с настройкой приложения и необходимых images
* Много полей для заполнения, возможны проблемы с поиском корректных css-селекторов
* Возможные проблемы при работе с 2-мя БД
* Большое кол-во тестов, достаточно большое время на разработку и дальнейшую поддержку тестов
* При тестировании происходит запись в БД. Необходимо отслеживать, что тестовые данные удаляются
* Если изменятся тестовые карты, необходимо будет переписывать тесты

## Интервальная оценка с учётом рисков (в часах)
* Настройка приложения и всех необходимых зависимостей (БД, JS, разворачивание контейнера) - 5 часа
* Написание авто-тестов для GUI - 12 часов
* Написание тестов для БД - 3 часа
* Написание тестов для API - 2 час
* Прогон тестов - 2 часа
* Улучшение структуры тестов - 3 часа
* Улучшение кода авто-тестов - 3 часа
* Подключение Allure для отчетности, дополнительные изменения в авто-тестах - 2 часа
* Описание багов - 2 часа

Итого 34 часа + 6 часа на непредвиденные обстоятельства = 40 часов

## План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации)
* Написание авто-тестов -  6 декабря
* Прогон тестов, улучшение структуры и кода -  10 декабря
* Отчетные документы -  13 декабря
